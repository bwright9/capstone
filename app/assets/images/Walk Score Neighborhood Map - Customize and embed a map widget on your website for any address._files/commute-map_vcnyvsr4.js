function WS_Path(t,e,i,o){this.distance=t,this.duration=e,this.routes=i,this.displayDistance=convertMetersForDisplay(t,o,!0,2,!1,!0),this.displayDuration=convertTimeForDisplay(e)}function CommuteMapApp(t,e){if(this.units=t,this.ELEVATION_SAMPLES=320,this.transitOverlayShown=!1,this.markers=[],this.transitMarkers=[],this.times={},this.distances={},this.routeOptions={},this.routeOptions.transit=0,this.routeOptionCounts={},this.cache=new SimpleCache,this.showingDetails=!1,have_google){ensure_ws_v3_extensions(),this.elevationService=new google.maps.ElevationService,this.directionsService=new google.maps.DirectionsService;new google.maps.LatLng(15,0)}e?(this.units||(this.units=e.geoData.getUnits()),this.geocoderService=e.walkScoreCore.getGeocoder(),this.map=e.map,this.infoWindow=new ws.InfoWindow({isSmall:!0}),this.container=e):(this.geocoderService=new google.maps.Geocoder,this.infoWindow=new ws.InfoWindow({isSmall:!0}),this.map=new AmenityMap(this),this.map.init($("#commute-map"),null,{autoShowTransit:!0,showReviews:!0,showContextMenu:!0,gmapOptions:{mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,scrollwheel:!1}}),_(["mod_google_map","mod_bing_map"]).each(_(this.map.enableModule).bind(this.map)),this.map.finalizeModules(),this.map.activateModule("mod_google_map"),this.map.lock("mod_google_map"),this.map.showAds(1,{channel:"6504844091"})),have_google&&(google.maps.event.addListener(this.map.gmap,"click",_(function(){this.map.mod_do("removeOverlay")(this.infoWindow)}).bind(this)),chart=new ElevationChart(this))}function updateMouseMarker(t){chart&&chart.updateMouseMarker(t)}function ElevationChart(t){this.app=t,this.map=t.map,this.gchart=null,this.data=null,this.mousemarker=null;var e=this;this.map;this.ensureGChart=_(function(){return!e.app.container||$("#commute-details").hasClass("enabled")?($("#elevation-chart").mouseout(function(){e.clearMouseMarker()}),this.gchart=new google.visualization.ColumnChart($("#elevation-chart")[0]),google.visualization.events.addListener(this.gchart,"onmouseover",function(t){updateMouseMarker(t.row)}),!0):void 0}).memoize(function(){return"only_once"}),this.updateMouseMarker=function(){var t={walking:0,bicycling:1,driving:2,transit:3};return function(e){var i=this.app.currentTravelMode;this.mousemarker&&this.mousemarker.travelMode_!=i&&(this.mousemarker=null);var o=this.data.path[e];if(o=new ws.LatLng(o.lat(),o.lng()),null==this.mousemarker){this.iconFactory||(this.iconFactory=new IconFactory);var a=this.iconFactory.createIcon("commute-dongle-"+i,28,24,0,24*t[i],14,24,"/images/commute-icons4.png");this.mousemarker=new ws.Marker({position:o,id:__ws_id(),app:this.app,icon:a}),this.map.mod_do("addOverlay")(this.mousemarker),this.mousemarker.travelMode_=i}else this.mousemarker.setPosition(o)}}(),this.draw=function(t){return this.busy?void(this.nextData=t):(this.data=t,this.nextData=null,this.busy=!0,this.ensureGChart()&&(this.gchart.draw(t.table,{width:$("#elevation-chart").width(),height:145,min:t.minEl,max:t.maxEl,legend:"none",focusBorderColor:"#78a3df",colors:["#abcdff"]}),$("#y-units").html("km"==(this.app||{}).units?"Meters":"Feet"),setTimeout(bindCallback(this,this.doneDrawing),300)),void 0)},this.doneDrawing=function(){this.busy=!1,this.nextData&&this.draw(this.nextData)},this.clearMouseMarker=function(){null!=this.mousemarker&&(this.map.mod_do("removeOverlay")(this.mousemarker),this.mousemarker=null)}}window.chart=null,have_google&&google.load("visualization","1",{packages:["columnchart"]});var ALL_TRAVEL_MODES=["walking","bicycling","driving","transit"],COST_PER_MI=.6918,COST_PER_KM=COST_PER_MI/1.609344;WS_Path.prototype.getFullName=function(){return _(this.routes).chain().select(function(t){return t.line}).map(function(t){return t.line}).value().join(", ")},WS_Path.prototype.getType=function(){var t=_(this.routes).detect(function(t){return"Train"==t.type});return t?"train":"bus"},CommuteMapApp.prototype.activate=function(){var t=function(t,e){var i=e.getThoroughfare(),o=e.getCityStateZip();return'<div class="iw"><div class="iw-title">'+t+'</div><div class="iw-contact-info"><div class="iw-street">'+i+'</div><div class="iw-citystate">'+o+"</div></div></div>"},e=this.container.geoData,i=this.container.commuteApp.workGeoData,o=t("Destination:",i);this.setRoute(e.getPreSnapLatLng(),i.getLatLng(),null,o),$("#commute-controls").removeClass("disabled"),this.initControlUI(),this.activateCommuteOptionInternal("driving")},CommuteMapApp.prototype.deactivate=function(){this.reset()},CommuteMapApp.prototype.reset=function(){this.transitFallback=!1,this.clearCachedRoutes(),this.clearBingCache(),this.clearTransitMarkers(),this.clearMarkers(),this.clearRouteWindows(),this.clearPolyline(),this.hideBingMap(),_(ALL_TRAVEL_MODES).each(function(t){$("#"+t).children("label").empty()}),$("#transit").find(".routes").empty()},CommuteMapApp.prototype.clearMarkers=function(){var t=this.map.mod_do("removeOverlay");_(this.markers).each(t),this.markers=[]},CommuteMapApp.prototype.clearPolyline=function(){this.polyline&&this.map.mod_do("removeOverlay")(this.polyline)},CommuteMapApp.prototype.setRoute=function(t,e,i,o){this.reverse_commute&&function(){var a=t;t=e,e=a,a=i,i=o,o=a}(),this.startLatLng=t,this.endLatLng=e;var a=new ws.LatLngBounds;this.iconFactory=new IconFactory;var n=this.container?this.container.houseResult.icon:this.iconFactory.makeHouseIcon(),s=this.iconFactory.makeBuildingIcon(isHighRes());this.addMarker(t,!1,i,n),a.extend(t),this.addMarker(e,!1,o,s),a.extend(e),this.map.mod_do("fitBounds")(a),this.container},CommuteMapApp.prototype.processAndCacheData=function(t,e){if(!e)return this.cache.put(t,"no path"),!1;for(var i=[],o=0;o<e.length;o++){var a=e[o].location;i.push(new ws.LatLng(a.lat(),a.lng()))}var n=new Object;if(n.polyline=new ws.Polyline({path:i,strokeColor:"#3760af"}),this.cache.put(t,n),have_google){var s="mi"==this.units?3.2808399:1;n.minEl=n.maxEl=roundNumber(Math.max(0,e[0].elevation*s),0),n.table=new google.visualization.DataTable,n.table.addColumn("number","Elevation"),n.path=[];for(var o=0;o<e.length;o++){n.path.push(e[o].location);var r=roundNumber(Math.max(0,e[o].elevation*s),0);n.table.addRow([r]),n.minEl=Math.min(n.minEl,r),n.maxEl=Math.max(n.maxEl,r)}var l="mi"==this.units?50:25;n.minEl=l*Math.floor(n.minEl/l),n.maxEl=l*Math.ceil(n.maxEl/l)}},CommuteMapApp.prototype.getCacheKey=function(t,e){return t+("transit"==t?"."+this.routeOptions[t]:"")},CommuteMapApp.prototype.renderRoute=function(t,e){this.currentTravelMode!=t&&$("#commute-details > div").removeClass("active"),this.currentTravelMode=t;var i=this.getCacheKey(t,this.routeOptions);e&&this.processAndCacheData(i,e);var o=this.cache.get(i);this.clearPolyline(),o&&"no path"!=o&&(this.map.mod_do("fitBounds")(_(o.polyline.path).reduce(function(t,e){return t.extend(e)},new ws.LatLngBounds)),this.polyline=o.polyline,this.map.mod_do("addOverlay")(this.polyline),this.maybeShowRouteWindows(t),!have_google||"bicycling"!=t&&"walking"!=t&&this.container?"transit"==t?($("#transit-options").addClass("active"),this.showTransitDetails()):"driving"==t&&$("#driving-costs").addClass("active"):($("#elevation-chart-wrapper").addClass("active"),chart.draw(o)))},CommuteMapApp.prototype.addMarker=function(t,e,i,o){if(this.markers.length<10){var a=new ws.Marker({position:t,icon:o,app:this,id:__ws_id()});i&&(a.clickHandler=_(function(){this.infoWindow.setOptions({content:i}),this.infoWindow.position=t,this.map.mod_do("openInfoWindow")(this.infoWindow),this.map.mod_do("customPanTo")(t),trackEvent(ACTIVE_COMPONENT,"marker click")}).bind(this),this.map.mod_do("addOverlay")(a)),this.markers.push(a),e&&this.updateCommute(),10==this.markers.length&&(document.getElementById("address").disabled=!0)}else alert("No more than 10 points can be added")},CommuteMapApp.prototype.activateCommuteOption=function(t){this.activateCommuteOptionInternal(t),trackEvent(ACTIVE_COMPONENT,"commute option click",t)},CommuteMapApp.prototype.activateCommuteOptionInternal=function(t){var e=$("#commute-controls");if(e.children("div").removeClass("active"),e.children("#"+t).addClass("active"),"transit"==t&&this.transitFallback)this.polyline&&this.map.mod_do("removeOverlay")(this.polyline),$("#elevation-chart-wrapper").css("display","none");else{this.map.mod_do("removeOverlay")(this.infoWindow),have_google&&this.hideBingMap();this.markers.length>1&&(this.cache.hasKey(this.getCacheKey(t,this.routeOptions))?this.renderRoute(t):have_google?(trackEvent(ACTIVE_COMPONENT,"directions request","google"),this._currentGoogleTransitResults?this.receiveRouteForDisplay(t,this._currentOriginalGoogleTransitResults,"OK"):this.directionsService.route(this.getDirectionsRequest(t),_(this.receiveRouteForDisplay).bind(this,t))):this.requestBingDirections(t,"transit"==t?this.routeOptions.transit:0,_(this.receiveRouteForDisplay).bind(this,t)))}},CommuteMapApp.prototype.receiveRouteForDisplay=function(){var t={};return CommuteMapApp.prototype.clearCachedRoutes=function(){t={}},function(e,i,o){if("OK"==o){var a=e,n=this.getCacheKey(e,this.routeOptions);if(t[n])return this.renderRoute(a,t[n]);var s=1,r=_(function(){var o=i.routes[have_google?this.routeOptions[e]||0:0].overview_path;have_google?this.elevationService.getElevationAlongPath({path:_(o).map(function(t){return t.ws_coerce("google")}),samples:this.ELEVATION_SAMPLES},_(function(e){e?this.renderRoute(a,t[n]=e):_(_(r).bind(this)).delay(1e3*s++)}).bind(this)):this.renderRoute(a,t[n]=_(o).map(function(t){return{location:t}}))}).bind(this);r()}else"ZERO_RESULTS"==o&&this.renderRoute(a,null)}}(),CommuteMapApp.prototype.requestBingDirections=function(){var t={};return CommuteMapApp.prototype.clearBingCache=function(){t={}},function(e,i,o){var a=_(function(a){this.normalizeBingResponse(i,o,t[e]=a)}).bind(this);if(!_(t[e]).isUndefined())return a(t[e]);var n={transit:"Transit",walking:"Walking",driving:"Driving"}[e];trackEvent(ACTIVE_COMPONENT,"directions request","bing"),$.ajax({url:"/data/get-bing-directions.php",data:{type:n,start:this.startLatLng.toUrlValue(),end:this.endLatLng.toUrlValue()},success:a,error:a})}}(),CommuteMapApp.prototype.normalizeBingResponse=function(t,e,i){var o;try{o=i?JSON.parse(i):{}}catch(a){o={}}var n=_(o).spelunk(["resourceSets",0,"resources"]);if(n){if(n=_(n).filter(_(function(t){var e=t.travelDuration;return!this[e]&&(this[e]=!0)}).bind({})),this.routeOptionCounts.transit=Math.min(4,n.length),t>=this.routeOptionCounts.transit)return void e(null);var s=n[t],r=_(s.routePath.line.coordinates).map(function(t){return new ws.LatLng(t[0],t[1])}),l=s.routeLegs[0].itineraryItems,h={bus:(new IconFactory).makeTransitIcon("bus.png"),train:(new IconFactory).makeTransitIcon("rail.png")},p={routes:[{overview_path:r,legs:_(l).map(function(t){return{transitInfo:function(){return t.transitLine?{type:t.iconType||"",line:t.transitLine.abbreviatedName,icon:h[(t.iconType||"").toLowerCase()]||h.bus,point:new ws.LatLng(t.maneuverPoint.coordinates[0],t.maneuverPoint.coordinates[1])}:null}(),duration:{value:t.travelDuration},distance:{value:1e3*t.travelDistance||_(r.slice(t.details[0].startPathIndices[0],t.details[0].endPathIndices[0])).reduce(function(t,e){var i=t[0];return i&&(t[1]+=i.distanceFrom(e)),t[0]=e,t},[null,0])[1]}}})}]};e(p,"OK")}else e(null)},CommuteMapApp.prototype.showBingMap=function(){this.clearPolyline(),this.map.activateModule("mod_bing_map",!0),$("#"+this.map.bingMap.div_id).unbind().click(_(function(){this.map.mod_do("removeOverlay")(this.infoWindow)}).bind(this))},CommuteMapApp.prototype.hideBingMap=function(){this.clearPolyline(),this.map.activateModule("mod_google_map")},CommuteMapApp.prototype.mungeGoogleTransitResponse=function(t){var e={bus:(new IconFactory).makeTransitIcon("bus.png"),train:(new IconFactory).makeTransitIcon("rail.png")};return this._currentGoogleTransitResults||(this.routeOptionCounts.transit=Math.min(4,t.routes.length),this._currentOriginalGoogleTransitResults=t,this._currentGoogleTransitResults={status:"OK",routes:_(t.routes).map(function(t){return{legs:_(t.legs[0].steps).map(function(t){var i=_(t).spelunk(["transit","line","vehicle","name"]);return _(i?{transitInfo:{type:i,line:t.transit.line.short_name,icon:e[i.toLowerCase()]||e.bus,point:t.start_point}}:{}).extend(t)})}})}),this._currentGoogleTransitResults},CommuteMapApp.prototype.buildPathFromResponse=function(t,e){have_google&&(!t||t.routes.length>1)&&(t=this.mungeGoogleTransitResponse(t)),have_google||(e=0);var i=t.routes[e||0],o=0,a=0,n=[];for(var s in i.legs)o+=i.legs[s].distance.value,a+=i.legs[s].duration.value,i.legs[s].transitInfo&&n.push(i.legs[s].transitInfo);return new WS_Path(o,a,n,this.units)},CommuteMapApp.prototype.receivePrecomputeData=function(t,e,i,o){if("OK"==o){i&&"transit"==t&&(this._currentGoogleTransitResults=null);var a=this.buildPathFromResponse(i,this.routeOptions[t]||0);if($("#"+t).children("label").empty().append(a.displayDuration+" ("+a.displayDistance+")"),this.times[t]=a.duration,this.distances[t]=a.distance,"driving"==t){if(this.showingDetails){var n=convertTimeForDisplay(2*a.duration*21.67,!0,"hours"),s=Number(convertMetersForDisplay(a.distance,this.units,!1,2,!1,!1)),r=2*s*21.67,l="mi"==this.units?COST_PER_MI:COST_PER_KM,h=roundNumber(r*l,0),p="mi"==this.units?"mile":"kilometer",u=$("#driving-costs");u.find("#dpm span").html(roundNumber(h)),u.find("#hpm span").html(roundNumber(n)),u.find("#mpm").html("<span>"+roundNumber(r)+"</span> "+p+"s per month"),u.find("#base-cost").html("<span>$.69</span> per "+p+' &nbsp;&nbsp;<a href="https://www.walkscore.com/commute-cost-calculator" target="_blank">Learn more</a>')}if(this.container){this.hideRushHourTimes();var c=this.markers[0].position.ws_coerce("google"),m=this.markers[this.markers.length-1].position.ws_coerce("google");this.getRushHourTimes(c,m,_(function(t){if(t&&_(t).spelunk(["travel_times","0","seconds"])&&t.travel_times[0].seconds>a.duration){var e=Math.round(t.travel_times[0].seconds/60);this.showRushHourTimes(e)}else this.getCongestion(c,_(function(t){if(t&&t.penalty){var e=Math.round(Math.max(1.25,t.penalty/2)*a.duration/60);60>e&&this.showRushHourTimes(e)}}).bind(this))}).bind(this))}}else if(a.routes.length){var d=this.routeOptionCounts.transit>1,g=d?" "+(this.routeOptions.transit+1)+" of "+this.routeOptionCounts.transit:"";if(this.transitRoutes=a.routes,this.maybeShowRouteWindows(),this.showingDetails);else{var v=$("#transit").removeClass("fallback").find(".secondary").empty().html("Route"+g);d&&v.append(" (").append($("<a />").html("next").click(_(function(t){t.stopPropagation(),this.routeOptions.transit=(this.routeOptions.transit+1)%this.routeOptionCounts.transit,this.showTransitRoute(this.routeOptions.transit)}).bind(this))).append(")"),v.append(": ").append($("<strong />").html(a.getFullName()))}}}else e?e():$("#"+t).children("label").empty().append("no route found").removeClass("live").unbind("click");this.precomputesCompleted++,3==this.precomputesCompleted&&this.saveCommuteData()},CommuteMapApp.prototype.getRushHourTimes=function(t,e,i){if(walkscore.TravelTime){var o=new walkscore.TravelTime({mode:walkscore.TravelTime.Mode.DRIVE,congestion:!0,origin:[t.lat(),t.lng()].join(","),destinations:[[e.lat(),e.lng()].join(",")]});o.on("times",i)}},CommuteMapApp.prototype.getCongestion=function(t,e){$.ajax({url:"/auth/rentals/shed/congestion?latLng="+[t.lat(),t.lng()].join(","),success:e,error:e})},CommuteMapApp.prototype.showRushHourTimes=function(t){$("#driving").addClass("info-dense").find(".secondary").html(t+" minutes during rush hour")},CommuteMapApp.prototype.hideRushHourTimes=function(){$("#driving").removeClass("info-dense").find(".secondary").empty()},CommuteMapApp.prototype.showTransitDetails=function(){if(!($("#transit-options #route-list").children().length>0))for(var t=_(function(t,e){t.click(_(function(){$("#transit-options #route-list li").removeClass("active").eq(e).addClass("active"),this.routeOptions.transit=e,this.showTransitRoute(e)}).bind(this))}).bind(this),e=0;e<this.routeOptionCounts.transit;e++)if(have_google){var i=this._currentGoogleTransitResults,o=this.buildPathFromResponse(i,e),a=$("<li />",{"class":o.getType()}).append($("<div />",{"class":"icon"})).append($("<p />").html(o.displayDuration+" - "+o.getFullName()));t(a,e),$("#transit-options #route-list").append(a)}else this.requestBingDirections("transit",e,_(function(i){var o=this.buildPathFromResponse(i),a=$("<li />",{"class":o.getType()}).append($("<div />",{"class":"icon"})).append($("<p />").html(o.displayDuration+" - "+o.getFullName()));t(a,e),$("#transit-options #route-list").append(a)}).bind(this))},CommuteMapApp.prototype.showTransitRoute=function(t){have_google?this.receivePrecomputeData("transit",null,null,"OK"):this.requestBingDirections("transit",t,_(this.receivePrecomputeData).bind(this,"transit",null)),this.activateCommuteOption("transit")},CommuteMapApp.prototype.initControlUI=function(){var t=$("#commute-controls");this.precomputesCompleted=0,_(ALL_TRAVEL_MODES).each(_(function(e){return"bicycling"!=e||have_google?($("#"+e).find("label").append($("<img />",{src:"//cdn2.walk.sc/2/images/progress.gif"})),t.children("#"+e).unbind().bind("click",_(this.activateCommuteOption).bind(this,e)),void(this.markers.length>1&&(have_google?(trackEvent(ACTIVE_COMPONENT,"directions request","google"),this.directionsService.route(this.getDirectionsRequest(e),_(this.receivePrecomputeData).bind(this,e,null))):this.requestBingDirections(e,0,_(this.receivePrecomputeData).bind(this,e,null))))):$("#"+e).remove()}).bind(this))},CommuteMapApp.prototype.getDirectionsRequest=function(t){for(var e=this.markers[0].position.ws_coerce("google"),i=this.markers[this.markers.length-1].position.ws_coerce("google"),o=[],a=1;a<this.markers.length-1;a++)o.push({location:this.markers[a].position.ws_coerce("google"),stopover:!0});var n={origin:e,destination:i,waypoints:o};switch(t){case"bicycling":n.travelMode=google.maps.DirectionsTravelMode.BICYCLING;break;case"driving":n.travelMode=google.maps.DirectionsTravelMode.DRIVING;break;case"walking":n.travelMode=google.maps.DirectionsTravelMode.WALKING;break;case"transit":n.travelMode=google.maps.DirectionsTravelMode.TRANSIT}return"transit"==t&&(n.provideRouteAlternatives=!0),n},CommuteMapApp.prototype.saveCommuteData=function(){var t="";t+=urlifyParam("&hgoog",getUrlParam("hgoog")),t+=urlifyParam("&hstreet",getUrlParam("hstreet")),t+=urlifyParam("&hcity",getUrlParam("hcity")),t+=urlifyParam("&hstate",getUrlParam("hstate")),t+=urlifyParam("&hpost",getUrlParam("hpost")),t+=urlifyParam("&hcc",getUrlParam("hcc")),t+=urlifyParam("&hlat",this.startLatLng.lat()),t+=urlifyParam("&hlng",this.startLatLng.lng()),t+=urlifyParam("&wgoog",getUrlParam("wgoog")),t+=urlifyParam("&wstreet",getUrlParam("wstreet")),t+=urlifyParam("&wcity",getUrlParam("wcity")),t+=urlifyParam("&wstate",getUrlParam("wstate")),t+=urlifyParam("&wpost",getUrlParam("wpost")),t+=urlifyParam("&wcc",getUrlParam("wcc")),t+=urlifyParam("&wlat",this.endLatLng.lat()),t+=urlifyParam("&wlng",this.endLatLng.lng()),this.times.walking&&this.distances.walking&&(t+=urlifyParam("&walkd",this.distances.walking),t+=urlifyParam("&walkt",this.times.walking)),this.times.bicycling&&this.distances.bicycling&&(t+=urlifyParam("&biked",this.distances.bicycling),t+=urlifyParam("&biket",this.times.bicycling)),this.times.driving&&this.distances.driving&&(t+=urlifyParam("&drived",this.distances.driving),t+=urlifyParam("&drivet",this.times.driving)),$.ajax({url:"/save-commute-data.php",type:"POST",data:t})},CommuteMapApp.prototype.addStopsToMap=function(t){for(var e in t)this.bindMarkerClickEvent(t[e])},CommuteMapApp.prototype.clearRouteWindows=function(){this.map.mod_do("removeOverlay");_(this.transitRouteMarkers||[]).each(this.map.mod_do("removeOverlay")),this.map.mod_deselect(),$(".ws_miniwindow").remove()},CommuteMapApp.prototype.maybeShowRouteWindows=function(){this.clearRouteWindows();var t=0;"transit"==this.currentTravelMode&&(this.transitRouteMarkers=_(this.transitRoutes||[]).map(_(function(e){var i="route-window-"+t++;return e.marker||(e.marker=new ws.InfoWindow({id:i,isSmall:!0,noOffset:!0,isRouteWindow:!0})),e.marker.setOptions({content:$("<div />").append($("<div />",{"class":"route-window"}).append($("<span />",{"class":"line"}).html(e.line)).append($("<span />",{"class":"type"}).html(e.type))).children().html()}),e.marker.setPosition(new ws.LatLng(e.point.lat(),e.point.lng())),this.map.mod_do("openInfoWindow")(e.marker),e.marker}).bind(this)))},CommuteMapApp.prototype.clearTransitMarkers=function(){var t=this.map.mod_do("removeOverlay");_(this.transitMarkers).each(t),this.transitMarkers=[]},CommuteMapApp.prototype.bindMarkerClickEvent=function(t){var e=this,i=t.getMarker(this.map);this.transitMarkers.push(i);var o=t;have_google&&google.maps.event.addListener(i,"click",function(){e.infoWindow.setOptions({content:o.getContent(),position:o.getLatLng()}),e.infoWindow.open(e.map,i),e.activateCommuteOption("transit")})};