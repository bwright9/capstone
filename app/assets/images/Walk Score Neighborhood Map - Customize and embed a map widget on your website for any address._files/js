!function(){var t=function(e,i,n){"use strict";function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function r(t,e,n,r,o,c){var h,u,l=i.createElement("script");r=r||f.errorTimeout,l.src=t;for(u in n)l.setAttribute(u,n[u]);e=c?a:e||y,l.onreadystatechange=l.onload=function(){!h&&s(l.readyState)&&(h=1,e(),l.onload=l.onreadystatechange=null)},p(function(){h||(h=1,e(1))},r),k(),o?l.onload():d.parentNode.insertBefore(l,d)}function o(t,e,n,s,r,o){var c,h=i.createElement("link");s=s||f.errorTimeout,e=o?a:e||y,h.href=t,h.rel="stylesheet",h.type="text/css";for(c in n)h.setAttribute(c,n[c]);r||(k(),d.parentNode.insertBefore(h,d),p(e,0))}function a(){var t=m.shift();v=1,t?t.t?p(function(){("c"==t.t?f.injectCss:f.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):v=0}function c(t,e,n,r,o,c,h){function u(i){if(!_&&s(l.readyState)&&(y.r=_=1,!v&&a(),i)){"img"!=t&&p(function(){T.removeChild(l)},50);for(var n in P[e])P[e].hasOwnProperty(n)&&P[e][n].onload();l.onload=l.onreadystatechange=null}}h=h||f.errorTimeout;var l=i.createElement(t),_=0,g=0,y={t:n,s:e,e:o,a:c,x:h};1===P[e]&&(g=1,P[e]=[]),"object"==t?(l.data=e,l.setAttribute("type","text/css")):(l.src=e,l.type=t),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){u.call(this,g)},m.splice(r,0,y),"img"!=t&&(g||2===P[e]?(k(),T.insertBefore(l,b?null:d),p(u,h)):P[e].push(l))}function h(t,e,i,n,s){return v=0,e=e||"j",S(t)?c("c"==e?O:j,t,e,this.i++,i,n,s):(m.splice(this.i++,0,t),1==m.length&&a()),this}function u(){var t=f;return t.loader={load:h,i:0},t.injectJs=r,t.injectCss=o,t}var l,f,_=i.documentElement,p=e.setTimeout,d=i.getElementsByTagName("script")[0],g={}.toString,m=[],v=0,y=function(){},w="MozAppearance"in _.style,b=w&&!!i.createRange().compareNode,T=b?_:d.parentNode,x=e.opera&&"[object Opera]"==g.call(e.opera),L=!!i.attachEvent&&!x,j=w?"object":L?"script":"img",O=L?"script":j,M=Array.isArray||function(t){return"[object Array]"==g.call(t)},D=function(t){return Object(t)===t},S=function(t){return"string"==typeof t},C=function(t){return"[object Function]"==g.call(t)},k=function(){d&&d.parentNode||(d=i.getElementsByTagName("script")[0])},E=[],P={},A={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};return f=function(e){function i(t){var e,i,n,s=t.split("!"),r=E.length,o=s.pop(),a=s.length,c={url:o,origUrl:o,prefixes:s};for(i=0;a>i;i++)n=s[i].split("="),e=A[n.shift()],e&&(c=e(c,n));for(i=0;r>i;i++)c=E[i](c);return c}function s(t){var e=t.split("?")[0];return e.substr(e.lastIndexOf(".")+1)}function r(t,e,r,o,a){var c=i(t),h=c.autoCallback;s(c.url);if(!c.bypass)return e&&(e=C(e)?e:e[t]||e[o]||e[t.split("/").pop().split("?")[0]]),c.instead?c.instead(t,e,r,o,a):(P[c.url]&&c.reexecute!==!0?c.noexec=!0:P[c.url]=1,t&&r.load(c.url,c.forceCSS||!c.forceJS&&"css"==s(c.url)?"c":n,c.noexec,c.attrs,c.timeout),(C(e)||C(h))&&r.load(function(){u(),e&&e(c.origUrl,a,o),h&&h(c.origUrl,a,o),P[c.url]=2}),void 0)}function o(t,e){function i(t,i){if(""===t||t){if(S(t))i||(h=function(){var t=[].slice.call(arguments);u.apply(this,t),l()}),r(t,h,e,0,o);else if(D(t)){n=function(){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i}();for(s in t)t.hasOwnProperty(s)&&(i||--n||(C(h)?h=function(){var t=[].slice.call(arguments);u.apply(this,t),l()}:h[s]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),l()}}(u[s])),r(t[s],h,e,s,o))}}else!i&&l()}var n,s,o=!!t.test,a=o?t.yep:t.nope,c=t.load||t.both,h=t.callback||y,u=h,l=t.complete||y;i(a,!!c||!!t.complete),c&&i(c),!c&&!!t.complete&&i("")}var a,c,h=t.loader;if(S(e))r(e,0,h,0);else if(M(e))for(a=0;a<e.length;a++)c=e[a],S(c)?r(c,0,h,0):M(c)?f(c):D(c)&&o(c,h);else D(e)&&o(e,h)},f.addPrefix=function(t,e){A[t]=e},f.addFilter=function(t){E.push(t)},f.errorTimeout=1e4,null==i.readyState&&i.addEventListener&&(i.readyState="loading",i.addEventListener("DOMContentLoaded",l=function(){i.removeEventListener("DOMContentLoaded",l,0),i.readyState="complete"},0)),u()}(this,document),e=function(){var e=null,i=[],n=!1;return function(s){i.push(s);var r=function(t){for(;i.length;)i.shift()(e=t)};e?r(e):n||(n=!0,t({load:"//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js",complete:function(){$.ajaxTransport("+*",function(t,i,n){if(!e.support.cors&&window.XDomainRequest){var s;return{send:function(e,i){s=new XDomainRequest,s.open("get",t.url),s.onload=function(){if(this.contentType.match(/\/xml/)){var t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1,t.loadXML(this.responseText),i(200,"success",[t])}else i(200,"success",[this.responseText])},s.ontimeout=function(){i(408,"error",["The request timed out."])},s.onerror=function(){i(404,"error",["The requested resource could not be found."])},s.send()},abort:function(){s&&s.abort()}}}}),r($.noConflict())}}))}}();!function(t){"use strict";var i=function(){var t=Array.prototype,e=Object.prototype,n=Function.prototype,s=t.slice,r=(t.unshift,e.toString),o=e.hasOwnProperty,a=t.forEach,c=t.map,h=t.reduce,u=(t.reduceRight,t.filter),l=(t.every,t.some,t.indexOf,t.lastIndexOf,Array.isArray),f=Object.keys,_=n.bind,p={},d=function(t,e,n){if(null!=t)if(a&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length){for(var s=0,r=t.length;r>s;s++)if(s in t&&e.call(n,t[s],s,t)===p)return}else for(var o in t)if(i.has(t,o)&&e.call(n,t[o],o,t)===p)return};return{reduce:function(t,e,n,s){var r=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return s&&(e=i.bind(e,s)),r?t.reduce(e,n):t.reduce(e);if(d(t,function(t,i,o){r?n=e.call(s,n,t,i,o):(n=t,r=!0)}),!r)throw new TypeError(reduceError);return n},has:function(t,e){return o.call(t,e)},isFunction:function(t){return"[object Function]"==r.call(t)},isUndefined:function(t){return void 0===t},bind:function(t,e){var n,r;if(t.bind===_&&_)return _.apply(t,s.call(arguments,1));if(!i.isFunction(t))throw new TypeError;return r=s.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,r.concat(s.call(arguments)));ctor.prototype=t.prototype;var i=new ctor,o=t.apply(i,r.concat(s.call(arguments)));return Object(o)===o?o:i}},defer:function(t){return i.delay.apply(i,[t,1].concat(s.call(arguments,1)))},throttle:function(t,e,i){var n,s,r,o=null,a=0;i||(i={});var c=function(){a=i.leading===!1?0:new Date,o=null,r=t.apply(n,s)};return function(){var h=new Date;a||i.leading!==!1||(a=h);var u=e-(h-a);return n=this,s=arguments,0>=u?(clearTimeout(o),o=null,a=h,r=t.apply(n,s)):o||i.trailing===!1||(o=setTimeout(c,u)),r}},identity:function(t){return t},keys:f||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)i.has(t,n)&&(e[e.length]=n);return e},values:function(t){return i.map(t,i.identity)},extend:function(t){return d(s.call(arguments,1),function(e){for(var i in e)t[i]=e[i]}),t},each:d,map:function(t,e,i){var n=[];return null==t?n:c&&t.map===c?t.map(e,i):(d(t,function(t,s,r){n[n.length]=e.call(i,t,s,r)}),t.length===+t.length&&(n.length=t.length),n)},select:function(t,e,i){var n=[];return null==t?n:u&&t.filter===u?t.filter(e,i):(d(t,function(t,s,r){e.call(i,t,s,r)&&n.push(t)}),n)},delay:function(t,e){var i=s.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},debounce:function(t,e,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||t.apply(s,r)};i&&!n&&t.apply(s,r),clearTimeout(n),n=setTimeout(o,e)}},clone:function(t){return i.isObject(t)?i.isArray(t)?t.slice():i.extend({},t):t},isArray:l||function(t){return"[object Array]"==r.call(t)},isObject:function(t){return t===Object(t)},oreduce:function(t,e,n,s){return i.reduce(t,function(t,i,n){return e(t,i,n),t},n||{},s)},spelunk:function(t,e){for(var e=i.clone(e);t&&e.length;)t=t[e.shift()];return t},spefunc:function(t,e,n){for(var e=i.clone(e),s=t;t&&e.length;)s=t,t=t[e.shift()];return i.bind(t||n||function(){},s)}}}(),n=t.walkscore,s={},r={},o=function(t){t.on=function(t,e){return this._listeners||(this._listeners=[]),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this},t._emit=function(){for(var t=arguments[0],e=[].slice.call(arguments,1),i=(this._listeners||[])[t]||[],n=0;n<i.length;n++)i[n].apply(void 0,e)}},a=function(){function t(t,e){return 0>t?e+t%e:t%e}var e=.0015,i=e/2;return function(n){n=1*n;var s=t(n,e);return i>s?n-=s:n=n+e-s,Math.round(1e4*n)/1e4}}(),c=function(t,e){i.each(e,function(e){t[e]=function(){return t["_"+e].apply(this,[].slice.call(arguments)),this}})},h=function(t,n){i.each(n,function(i){var n=t[i];t[i]=function(){var t=[].slice.call(arguments),i=this;e(function(e){t.unshift(e),n.apply(i,t)})}})},u=function(t){e(function(e){e.ajax({url:"//api2.walkscore.com/api/v1/"+t+"/quota",data:{wsid:"WS_TILE"}})})};!function(){var n=16,r=function(t){var e="0123456789ABCDEF";return t=t.toUpperCase(),(e.indexOf(t.substr(0,1))<<4)+e.indexOf(t.substr(1,1))},l=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},f={transit:.5,bike:.5,drive:1,walk:.1},_={transit:3,bike:9,drive:15,walk:2},p="fill",d="burn",g=null,m=function(){if(t.google&&l()&&!g){g=function(t,e){this.shed_=e,this.resetStops(),this.setMap(t);var n=i.debounce(i.bind(this.position_,this),10);google.maps.event.addListener(t,"center_changed",n),google.maps.event.addListener(t,"resize",n)};var e=g.prototype=new google.maps.OverlayView;e.draw=function(){var t=this.ctx_;if(t){var e=this.base_x_,i=this.base_y_,n=this.shed_._style==p,s=this.stops_||[],r=this.getProjection(),o=this.shed_._rgb,a=this.getMap(),c=a.getCenter(),h=2*Math.PI;this.clear_(),n?t.fillStyle="rgb("+o[0]+","+o[1]+","+o[2]+")":t.fillStyle="rgb(255,255,255)",t.lineWidth=8,o&&(t.strokeStyle="rgb("+o[0]+","+o[1]+","+o[2]+")"),t.save();var u=n?1:0,l=s.length>1;if(l){var f=r.fromLatLngToDivPixel(c),_=new google.maps.LatLng(c.lat(),c.lng()+1),d=new google.maps.LatLng(c.lat()+1,c.lng()),g=new google.maps.LatLng(c.lat()+1/69.04,c.lng()),m=r.fromLatLngToDivPixel(_),v=r.fromLatLngToDivPixel(d),y=r.fromLatLngToDivPixel(g),w=Math.abs(f.x-m.x),b=Math.abs(f.y-v.y),T=Math.abs(f.y-y.y),x=s[0][0],L=new google.maps.LatLng(x[0],x[1]),j=r.fromLatLngToDivPixel(L);t.translate(-e+j.x,-i+j.y)}if(l)for(;2>u;u++){u?t.globalCompositeOperation=n?"source-over":"destination-out":t.globalCompositeOperation="source-over";for(var O=s.length-1;O>=0;O--)t.beginPath(),t.arc((s[O][0][1]-x[1])*w,(x[0]-s[O][0][0])*b,s[O][1]*T,0,h,!0),t.closePath(),u?t.fill():t.stroke()}t.restore(),t.globalCompositeOperation="source-over"}},e.resetStops=function(){this.stops_=[]},e.addStop=function(t,e){this.stops_.push([t,e])},e.clear_=function(){this.shed_._style==p?this.ctx_.fillStyle="rgba(0,0,0,0)":this.ctx_.fillStyle="rgba(0,0,0,.6)",this.ctx_.clearRect(0,0,this.w_,this.h_),this.ctx_.fillRect(0,0,this.w_,this.h_)},e.position_=function(t){var e=this.getMap(),i=2.5,n=this.vw_,s=this.vh_;if(e&&e.getBounds()){this.div_=t(e.getDiv()),this.vw_=this.div_.width(),this.vh_=this.div_.height(),this.w_=this.vw_*i,this.h_=this.vh_*i,this.ow_=(this.w_-this.div_.width())/2,this.oh_=(this.h_-this.div_.height())/2;var r=e.getBounds(),o=new google.maps.LatLng(r.getNorthEast().lat(),r.getSouthWest().lng());if(this.getProjection()){var a=this.getProjection().fromLatLngToDivPixel(o);this.did_init_new_map_&&this.vw_==n&&this.vh_==s&&this.pre_pos_&&Math.abs(a.x-this.pre_pos_.x)<this.w_/4&&Math.abs(a.y-this.pre_pos_.y)<this.h_/4||(this.did_init_new_map_=!0,this.pre_pos_=a,this.make_canvas_(),this.base_x_=a.x-this.ow_,this.base_y_=a.y-this.oh_,this.position_canvas_(),this.canvas_.width=this.w_,this.canvas_.height=this.h_,this.draw())}}},e.make_canvas_=function(t){this.canvas_||(this.canvas_=t("<canvas />",{width:this.w_,height:this.h_})[0],this.ctx_=this.canvas_.getContext("2d")),t(this.canvas_).width(this.w_).height(this.h_)},e.position_canvas_=function(t){var e=this.getPanes().mapPane;t(this.canvas_).css("position","absolute").css("top",this.base_y_+"px").css("left",this.base_x_+"px").css("opacity",this.shed_._opacity||1).appendTo(t(e))},e.onAdd=function(){this.position_()},e.onRemove=function(t){t(this.canvas_).remove(),this.ctx_=this.canvas_=this.did_init_new_map_=null},h(e,["position_","make_canvas_","position_canvas_","onRemove"])}};s.TravelTime=function(t){this._init(t)},function(){var t=s.TravelTime.prototype,h=["setMap","setOrigin","setOrigins","setTime","setMode","setColor","setOpacity","setStyle","setDestinations","setMaxTime","setTerse","setCongestion"];t._init=function(t){m(),this.setOptions(t)},t.setOptions=function(t){t||(t={}),i.each(h,i.bind(function(e){var i=e.substr(3,1).toLowerCase()+e.substr(4);t[i]&&this[e](t[i])},this))},t._setMap=function(t){this._mapView&&(t?this._mapView.setMap(t):this._mapView.setMap(null)),this._map=t,this._up()},t._setTerse=function(t){this._terse=!0},t._setOpacity=function(t){this._opacity=t},t._prepareOrigin=function(t){t instanceof google.maps.LatLng&&(t=[t.lat(),t.lng()].join(",")),this._prepQueue||(this._prepQueue=[],i.delay(i.bind(this._prepBatch,this),1)),this._prepQueue.push(t)},t._prepBatch=function(){for(;this._prepQueue.length;)this._fetchDraw(this._prepQueue.splice(0,n));this._prepQueue.length||delete this._prepQueue},t._setOrigin=function(t){this._origins=[],this._addOrigin(t),this._fetchDraw()},t._addOrigin=function(t){if(t instanceof google.maps.LatLng&&(t=[t.lat(),t.lng()].join(",")),this._origins.push(t),1==this._origins.length){var e=this._osnap=i.map(this._origins[0].split(","),function(t){return a(t)});this._ll=new google.maps.LatLng(e[0],e[1])}},t._setOrigins=function(t){this._origins=[],i.each(t,i.bind(this._addOrigin,this)),this._fetchDraw()},t._setDestinations=function(t){this._destinations=i.map(t||[],function(t){return t instanceof google.maps.LatLng?[t.lat(),t.lng()].join(","):t}),this._destinations.length||delete this._destinations,this._up()},t._setMaxTime=function(t){this._maxTime=t,this._up()},t._setMode=function(t){this._mode=t,this._fetchDraw()},t._setTime=function(t){this._time=t,this._up()},t._setCongestion=function(t){this._congestion=t?1:"",this._up()},t._setColor=function(t){"#"==t.substr(0,1)?this._rgb=i.map([1,3,5],function(e){return r(t.substr(e,2))}):"rgb("==t.substr(0,4)&&(this._rgb=i.map(t.substr(4).substr(0,t.length-5).split(","),function(t){return t-0})),this._up()},t._setStyle=function(t){this._style=t,this._up()},t._fetchDraw=function(t){var n=this._origins,s=this._mode,r=this._congestion;if(t&&s||n&&s&&this._map){if(!t&&1!=n.length)return this._emit("error",{visualization:"Need exactly one origin"});var o=t||n,c=this._dCache||(this._dCache={}),h={},l=i.bind(function(e,i){return t||this._fingerprint!=e&&!i?void 0:(this._data=this._dCache[e],this._up())},this);if(i.each(o,function(t){var e=i.map(t.split(","),function(t){return a(t)}),n=e.join(","),r=[s,n].join("_");return c[r]?l(r,!0):(h[n]={f:r,o:t},c[r]=[],void 0)}),i.keys(h).length){t||(this._fingerprint=i.values(h)[0].f);var f=i.bind(this._emit,this);e(i.bind(function(t){var e=function(t){i.each(h,function(e,i){var n=e.f,r=e.o;"OK"==(t||{}).status?(c[n]=((t.response||{}).data||{})[i]||[],f("ready",{origin:r,mode:s}),l(e.f)):(c[n]=[],f("error",{request_failed:"show"}))})};u("shed_data");var n=this.noCDN?"//api2.walkscore.com/api/v1/shed_data/json":"//apicdn.walkscore.com/api/v1/shed_data/json";t.ajax({url:n,type:"GET",dataType:"json",success:e,error:e,data:{wsid:"WS_TILE",origin:i.keys(h).sort().join("|"),congestion:r,mode:s}})},this))}}},t._fetchTime=function(){var t=this._origins,n=this._mode,s=this._congestion,r=this._maxTime||0,o=this._destinations,a=this._fprintTime();if(t&&n&&o&&a!=this._lastFprintTime){this._lastFprintTime=a;var c=i.bind(this._emit,this),h=i.bind(this._emit,this,"times"),u=this._terse;e(function(e){for(var a=function(t){"OK"==(t||{}).status?i.each(((t||{}).response||{}).results||[],h):c("error",{request_failed:"times"})},l=t.slice(0),f=Math.min(Math.ceil(l.length/32),64);l.length;)e.ajax({url:"//api2.walkscore.com/api/v1/traveltime/json",type:"POST",dataType:"json",success:a,error:a,traditional:!0,data:{wsid:"WS_TILE",origin:l.splice(0,f),mode:n,congestion:s,max_time:r,terse:u,destination:o}})})}},t._up=function(){var t=this._map&&this._mode&&this._ll&&this._time&&this._data;i.delay(i.bind(this._fetchTime,this),1),t&&(this._mapView||(this._mapView=new g(this._map,this)),this._data.length>1?(this._draw(),this._emit("show",{mode:this._mode,origin:this._origins[0],time:this._time})):this._emit("error",{unroutable:!0,mode:this._mode,origin:this._origins[0]}))},t._fprintDraw=function(){return(this._rgb||[]).concat([this._mode,this._time,this._congestion||"",(this._data||[]).length]).concat(this._osnap).join("_")},t._fprintTime=function(){return[this._mode,this._congestion||""].concat(this._origins).concat(this._destinations||[]).join("_")},t._draw=function(t,e){if(e)var n=this._time;if(i.isUndefined(t)||(this._time=t),!i.isUndefined(this._time)||e){var s=this._data||[],r=this._time,o=f[this._mode],a=_[this._mode],c=60*r,h=this._fprintDraw(),u=this._ll,u=[this._ll.lat(),this._ll.lng()],l={sw:[361,361],ne:[-361,-361]};if(e){if(s.length<=1)return}else{if(this._lastFprintDraw==h)return;this._lastFprintDraw=h,this._mapView.resetStops()}for(var p=0;p<s.length;p++){var d=s[p],g=c-s[p][2];if(g>0){var m=g/60/60*a;m>o&&(m=o),Math.max(Math.abs(d[0]-u[0]),Math.abs(d[1]-u[1]))<3&&(d[0]<l.sw[0]?l.sw[0]=d[0]-0:d[0]>l.ne[0]&&(l.ne[0]=d[0]-0),d[1]<l.sw[1]?l.sw[1]=d[1]-0:d[1]>l.ne[1]&&(l.ne[1]=d[1]-0)),e||this._mapView.addStop(d,m)}}var v=new google.maps.LatLngBounds(new google.maps.LatLng(l.sw[0],l.sw[1]),new google.maps.LatLng(l.ne[0],l.ne[1]));return e?this._time=n:(this._mapView.draw(),this._curBounds=v),v}},t.getMap=function(){return this._map},t.getMode=function(){return this._mode},t.getTime=function(){return this._time},t.getOrigin=function(){return(this._origins||[])[0]},t.getDestinations=function(){return this._destinations},t.getBounds=function(){return this._curBounds},t.getOpacity=function(){return this._opacity},t.getColor=function(){return this._rgb&&"rgb("+this._rgb.join(",")+")"},t.getBoundsForTime=function(t){return this._draw(t,!0)},c(t,["prepareOrigin"].concat(h)),o(t)}(),s.TravelTime.Mode={WALK:"walk",BIKE:"bike",DRIVE:"drive",TRANSIT:"transit"},s.TravelTime.Style={FILL_IN:p,BURN_OUT:d}}(),i.each(n||{},function(t,e){r[e]=t}),i.each(s,function(t,e){r[e]&&!r[e].placeholder||(r[e]=t)}),r.noConflict=function(){return t.walkscore=n,s},t.walkscore=r}(this)}();